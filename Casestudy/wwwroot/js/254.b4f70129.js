"use strict";(globalThis["webpackChunkvuecasestudy"]=globalThis["webpackChunkvuecasestudy"]||[]).push([[254],{2403:(e,t,s)=>{s.d(t,{G:()=>r,W:()=>l});const a="/api/",r=async e=>{let t,s=n();try{let r=await fetch(`${a}${e}`,{method:"GET",headers:s});t=await r.json()}catch(e){console.log(e),t={error:`Error has occured: ${e.message}`}}return t},l=async(e,t)=>{let s,r=n();try{let l=await fetch(`${a}${e}`,{method:"POST",headers:r,body:JSON.stringify(t)});s=await l.json()}catch(e){s=e}return s},n=()=>{const e=new Headers,t=JSON.parse(sessionStorage.getItem("customer"));return t?(e.append("Content-Type","application/json"),e.append("Authorization","Bearer "+t.token)):e.append("Content-Type","application/json"),e}},7254:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(1347),r=s(7763);const l={class:"row justify-center q-mt-md"},n={key:0,class:"text-title2 text-center text-negative text-bold q-mt-sm"};function o(e,t,s,o,i,d){const u=(0,a.g2)("q-avatar"),c=(0,a.g2)("q-input"),m=(0,a.g2)("q-btn"),p=(0,a.g2)("q-form"),g=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",l,[(0,a.bF)(u,{size:"80px",style:{"border-radius":"50%"}},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.Lk)("img",{src:"/img/BrandLogo.png"},null,-1)]))),_:1})]),t[3]||(t[3]=(0,a.Lk)("div",{class:"text-h4 text-center q-mt-md q-mb-md text-primary"},"Login",-1)),o.state.status?((0,a.uX)(),(0,a.CE)("div",n,(0,r.v_)(o.state.status),1)):(0,a.Q3)("",!0),(0,a.bF)(g,{class:"q-ma-md q-pa-md"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{ref:"myForm",class:"q-gutter-md",greedy:"",onSubmit:o.login,onReset:o.resetFields},{default:(0,a.k6)((()=>[(0,a.bF)(c,{outlined:"",placeholder:"Email Input",id:"email",modelValue:o.state.email,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.email=e),rules:[o.isRequired,o.isValidEmail]},null,8,["modelValue","rules"]),(0,a.bF)(c,{outlined:"",placeholder:"Password Input",id:"password",modelValue:o.state.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.state.password=e),type:"password",rules:[o.isRequired]},null,8,["modelValue","rules"]),(0,a.bF)(m,{label:"Login",type:"submit"}),(0,a.bF)(m,{label:"Reset",type:"reset"})])),_:1},8,["onSubmit","onReset"])])),_:1})])}var i=s(2403),d=s(4187),u=s(455);const c={setup(){const e=(0,u.lq)(),t=(0,u.rd)(),s=e=>{const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(e)||"Invalid email"};let a=(0,d.Kh)({email:"",password:"",status:""});const r=e=>!!e||"field is required",l=async()=>{let s={email:a.email,password:a.password};try{let r=await(0,i.W)("Customer/login",s);r.token&&!r.token.toLowerCase().includes("failed")?(sessionStorage.setItem("customer",JSON.stringify(r)),a.status="Login successful!",e.query.nextUrl?t.push({path:e.query.nextUrl}):t.push({path:"/"})):a.status=r.token||"Login failed"}catch(e){a.status=e.message}},n=()=>{a.example="",a.status=""};return{state:a,login:l,isRequired:r,resetFields:n,isValidEmail:s}}};var m=s(2968),p=s(5305),g=s(3341),h=s(3417),y=s(6067),b=s(9039),q=s(272),w=s.n(q);const f=(0,m.A)(c,[["render",o]]),k=f;w()(c,"components",{QAvatar:p.A,QCard:g.A,QForm:h.A,QInput:y.A,QBtn:b.A})}}]);
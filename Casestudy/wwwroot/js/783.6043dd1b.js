"use strict";(globalThis["webpackChunkvuecasestudy"]=globalThis["webpackChunkvuecasestudy"]||[]).push([[783],{2403:(t,e,a)=>{a.d(e,{G:()=>n,W:()=>o});const s="/api/",n=async t=>{let e,a=r();try{let n=await fetch(`${s}${t}`,{method:"GET",headers:a});e=await n.json()}catch(t){console.log(t),e={error:`Error has occured: ${t.message}`}}return e},o=async(t,e)=>{let a,n=r();try{let o=await fetch(`${s}${t}`,{method:"POST",headers:n,body:JSON.stringify(e)});a=await o.json()}catch(t){a=t}return a},r=()=>{const t=new Headers,e=JSON.parse(sessionStorage.getItem("customer"));return e?(t.append("Content-Type","application/json"),t.append("Authorization","Bearer "+e.token)):t.append("Content-Type","application/json"),t}},9783:(t,e,a)=>{a.r(e),a.d(e,{default:()=>y});var s=a(1347),n=a(8633);const o={class:"text-center q-mt-md"},r={style:{height:"50vh",width:"90vw","margin-left":"5vw",border:"solid"},ref:"mapRef"};function c(t,e,a,c,l,d){const i=(0,s.g2)("q-avatar"),u=(0,s.g2)("q-input"),p=(0,s.g2)("q-btn");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(i,{class:"q-mt-md",size:"100px",square:""},{default:(0,s.k6)((()=>e[1]||(e[1]=[(0,s.Lk)("img",{src:"/icons/CartIcon.png"},null,-1)]))),_:1}),e[3]||(e[3]=(0,s.Lk)("div",{class:"text-h6"},"Find 3 closest Branches To:",-1)),(0,s.Lk)("div",null,[(0,s.bF)(u,{class:"q-ma-lg text-h5",placeholder:"enter current address",id:"address",modelValue:c.state.address,"onUpdate:modelValue":e[0]||(e[0]=t=>c.state.address=t)},null,8,["modelValue"]),e[2]||(e[2]=(0,s.Lk)("br",null,null,-1))]),(0,s.bF)(p,{label:"Find 3",onClick:c.genMap,class:"q-mb-md",style:{width:"30vw"}},null,8,["onClick"]),(0,s.bo)((0,s.Lk)("div",r,null,512),[[n.aG,!0===c.state.showmap]])])}a(939),a(4520),a(7049);var l=a(4187),d=a(2403);const i={name:"BranchLocator",setup(){const t=(0,l.KR)(null);let e=(0,l.Kh)({status:"",address:"",showmap:!1});const a=async t=>{try{let e=`https://api.tomtom.com/search/2/geocode/${t}.json?key=ziYrOVnHLvzfYQ9tdhc2rCopnd0CjkVq`,a=await fetch(e),s=await a.json();return s.results[0].position}catch(t){e.status=t.message}},s=async(t,a)=>{try{let e=await(0,d.G)(`branch/${t}/${a}`);return console.log(e),e}catch(t){e.status=t.message}return[]},n=async()=>{try{e.showmap=!0;const n=window.tt;let o=`https://api.tomtom.com/search/2/geocode/${e.address}.json?key=ziYrOVnHLvzfYQ9tdhc2rCopnd0CjkVq`,r=await fetch(o),c=await r.json(),l=c.results[0].position.lat,d=c.results[0].position.lon,i=n.map({key:"ziYrOVnHLvzfYQ9tdhc2rCopnd0CjkVq",container:t.value,source:"vector/1/basic-main",center:[d,l],zoom:8});i.addControl(new n.FullscreenControl),i.addControl(new n.NavigationControl);let u=await a(e.address);console.log(u);let p=await s(u.lat,u.lon);p.forEach((t=>{let e=(new n.Marker).setLngLat([Number(t.longitude),Number(t.latitude)]).addTo(i),a=new n.Popup({offset:25});a.setHTML(`\n  <div id="popup">Branch#: ${t.id}</div>\n  <div>${t.street}, ${t.city}</div>\n  <div>${t.distance.toFixed(2)} km</div>\n`),e.setPopup(a)}))}catch(t){e.status=t.message}};return{mapRef:t,state:e,genMap:n,getLatLon:a,getClosestBranches:s}}};var u=a(2968),p=a(5305),h=a(6067),m=a(9039),g=a(272),w=a.n(g);const v=(0,u.A)(i,[["render",c]]),y=v;w()(i,"components",{QAvatar:p.A,QInput:h.A,QBtn:m.A})}}]);